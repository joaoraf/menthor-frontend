<!DOCTYPE html>
<html>
<head>
	<!-- Joint Core API -->
    <link rel="stylesheet" href="joint-core/joint.css" />
	<script src="joint-core/jquery.min.js"></script>
    <script src="joint-core/lodash.min.js"></script>
    <script src="joint-core/backbone-min.js"></script>
    <script src="joint-core/joint.js"></script>
	<script src="joint-core/joint.shapes.uml.js"></script>	

	<!-- Draw2D API -->
	<link rel="stylesheet" href="draw2d/css/contextmenu.css" />
	<script src="draw2d/lib/jquery.contextmenu.js"></script>
    
	<!-- Menthor Editor API -->	
	<script src="menthor-editor/common.js"></script>
	<script src="menthor-editor/mcore.js"></script>
	<link rel="stylesheet" href="menthor-editor/mcore-editor.css" />
	<script src="menthor-editor/mcore-editor.js"></script>	
	<script src="menthor-editor/ontouml.js"></script>
	<script src="menthor-editor/ontouml-editor.js"></script>
	
</head>

<body>
	
	<div id="tools">
		<div id="logo"></div>	
		<br />		
		<div id="pallete"></div>			
	</div>

	<div id="diagram">
		<div id="editor">
			<div class="resize nw"></div>
			<div class="resize n"></div>
			<div class="resize ne"></div>
			<div class="resize e"></div>
			<div class="resize se"></div>
			<div class="resize s"></div>
			<div class="resize sw"></div>
			<div class="resize w"></div>
			<div class="tools delete" title="Delete"></div>
			<div class="tools duplicate" title="Duplicate"></div>
			<div class="tools connect" title="Connect"></div>
			<div class="contextmenu"></div>
		</div>
		<div id="canvas"></div>
	</div>
    
	<script type="text/javascript">
		
	var pallete = new OntoUMLPallete();	
	pallete.installOn("pallete");
	
	graph = new joint.dia.Graph;
	pallete.enableDnd(graph);
	
	canvas = new joint.dia.Paper({
		el: $('#canvas'),
		width: $("#diagram").width()*2,
		height: $("#diagram").height()*2,
		gridSize: 1,
		model: graph,		
		
		//switch creating vertices with single click to double click
		linkView: joint.dia.LinkView.extend({
			pointerdblclick: function(evt, x, y) {
				if (V(evt.target).hasClass('connection') || V(evt.target).hasClass('connection-wrap')) {
					this.addVertex({ x: x, y: y });
				}
			}
		}),
		interactive: function(cellView) {
			if (cellView.model instanceof joint.dia.Link) {
				// Disable the default vertex add functionality on pointerdown.
				return { vertexAdd: false };
			}
			return true;
		}
	});	
	forbidDroppingLinksOnCanvas(canvas);
	
	allowSelecting(graph, canvas);
	allowEditing(graph, canvas);
	allowRightClickMenus(graph, canvas);
	
	var sugg = new OntoUMLConnSuggestions();
	sugg.install(graph, canvas);
	
	//example
	runningExample(graph);
  
	</script>
</body>
</html>
